<!DOCTYPE html>

<html>

    <head>

        <style>
        </style>

        <title>Genome Browser</title>

        <script language="javascript" src="./build/dalliance-all.js"></script>

        <script language="javascript" src="./psgb.js"></script>

        <script language="javascript">

         var factory = function(config) {
             return {
                 features: PS.createSource(
                     PS.fetchIPFSFeature(PS.parseScoreFeature)(PS.testPath)
                 )
             };
         };

         window.dalliance_registerSourceAdapterFactory("ipfsFetch", factory);

         var sources = [
             {
                 name: 'Genome',
                 twoBitURI: 'http://www.biodalliance.org/datasets/GRCm38/mm10.2bit',
                 desc: 'Mouse reference genome build GRCm38',
                 tier_type: 'sequence',
                 provides_entrypoints: true
             },
             {
                 "name": "GWAS Catalog",
                 "desc": "NHGRI GWAS Catalog",
                 "style": [
                     {
                         "type": "default",
                         "style": {
                             "glyph": "PLIMSOLL",
                             "SIZE": "12",
                             "STROKECOLOR": "black",
                             "FGCOLOR": "red",
                             "BUMP": "yes"
                         }
                     }
                 ],
                 "forceReduction": -1,
                 /* "bwgURI": "http://ngs.sanger.ac.uk/production/uk10k/dalliance/gwascatalog.bb"*/
                 "bwgURI": "http://localhost:8080/gwascatalog.bb"
             },
             /*{
                 name: "GWAS",
                 renderer: "gwasRenderer",
                 "forcedReduction": -1,

                 bwgURI: "./gwascatalog.bb",
                 tier_type: "ipfsFetch",
                 style: [
                 { type: "default",
                 style: { glyph: "BOX",
                 BUMP: "yes",
                 COLOR1: "blue",
                 COLOR2: "blue",
                 COLOR3: "blue",
                 HEIGHT: "120"
                 }
                 }
                 ]
             },*/
             /*{
                 name: 'SNP density',
                 jbURI: "http://test-gn2.genenetwork.org/api_pre1/snp/",
                 jbQuery: "",
                 style: [
                     { type: "default",
                       style: { glyph: "HISTOGRAM",
                                MIN: 0,
                                MAX: 1000,
                                AUTOMAX: "yes",
                                STEPS: 500,
                                HIDEAXISLABEL: "yes",
                                COLOR1: "red",
                                COLOR2: "red",
                                COLOR3: "red",
                                HEIGHT: 120,
                       }
                     }
                 ],
                 refetchOnZoom: true,
             },
             {
                 name: 'Genes',
                 desc: 'Gene structures from GENCODE M2',
                 bwgURI: 'http://www.biodalliance.org/datasets/GRCm38/gencodeM2.bb',
                 stylesheet_uri: 'http://test-gn2.genenetwork.org/api_pre1/templates/biodalliance/gencode.xml',
                 collapseSuperGroups: true,
                 trixURI: 'http://www.biodalliance.org/datasets/GRCm38/gencodeM2.ix'
             }*/
         ];

         var config = { wrapRenderer: WrappedRenderer.wrapRenderer,
                        browser: Browser,
                        tracks: { BDTrack: sources }
         };

         PS.main(config)();

        </script>
    </head>

    <body>
        <style>
         // These styles are used by the PS elements
         #bdDiv {
             width: 100%,
             float: left;
         }
         #cyDiv {
             width: 100%;
             height: 300px;
             float: left;
             display: block;
         }
         .powered-by {
             display: none;
         }
        </style>
        <div id="psgbHolder"></div>
    </body>
</html>
